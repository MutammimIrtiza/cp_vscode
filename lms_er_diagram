// LMS Schema ER Diagram
digraph ER_Diagram {
	nodesep=0.5 rankdir=LR ranksep=1.0 size="20,20"
	node [fontname=Arial fontsize=10]
	users [label="{ USERS | id (PK)\lemail\lpassword_hash\lfull_name\lrole\lis_verified\lcreated_at\l }" fillcolor=lightblue shape=record style=filled]
	categories [label="{ CATEGORIES | id (PK)\lname\l }" fillcolor=lightblue shape=record style=filled]
	courses [label="{ COURSES | id (PK)\lslug\ltitle\llevel\lprice_cents\lvisibility\lcategory_id (FK)\l }" fillcolor=lightblue shape=record style=filled]
	modules [label="{ MODULES | id (PK)\lcourse_id (FK)\ltitle\lorder_idx\l }" fillcolor=lightblue shape=record style=filled]
	lectures [label="{ LECTURES | id (PK)\lmodule_id (FK)\ltitle\lcontent_type\lorder_idx\l }" fillcolor=lightblue shape=record style=filled]
	materials [label="{ MATERIALS | id (PK)\lfile_url\lmedia_type\l }" fillcolor=lightblue shape=record style=filled]
	enrollments [label="{ ENROLLMENTS | id (PK)\luser_id (FK)\lcourse_id (FK)\lstatus\lprogress_pct\l }" fillcolor=lightblue shape=record style=filled]
	payments [label="{ PAYMENTS | id (PK)\lamount_cents\lstatus\lprovider\l }" fillcolor=lightblue shape=record style=filled]
	assessments [label="{ ASSESSMENTS | id (PK)\lcourse_id (FK)\lkind\lmax_score\l }" fillcolor=lightblue shape=record style=filled]
	questions [label="{ QUESTIONS | id (PK)\lbody\lqtype\lpoints\l }" fillcolor=lightblue shape=record style=filled]
	question_options [label="{ QUESTION_OPTIONS | id (PK)\ltext\lis_correct\l }" fillcolor=lightblue shape=record style=filled]
	attempts [label="{ ATTEMPTS | id (PK)\luser_id (FK)\lscore\lstatus\l }" fillcolor=lightblue shape=record style=filled]
	comments [label="{ COMMENTS | id (PK)\lbody\lis_hidden\l }" fillcolor=lightblue shape=record style=filled]
	certificates [label="{ CERTIFICATES | id (PK)\lcertificate_code\lissued_at\l }" fillcolor=lightblue shape=record style=filled]
	creates [label=creates fillcolor=lightyellow shape=diamond style=filled]
	instructs [label=instructs fillcolor=lightyellow shape=diamond style=filled]
	belongs_to [label=belongs_to fillcolor=lightyellow shape=diamond style=filled]
	has_modules [label=has_modules fillcolor=lightyellow shape=diamond style=filled]
	has_lectures [label=has_lectures fillcolor=lightyellow shape=diamond style=filled]
	has_materials [label=has_materials fillcolor=lightyellow shape=diamond style=filled]
	enrolled_in [label=enrolled_in fillcolor=lightyellow shape=diamond style=filled]
	pays_for [label=pays_for fillcolor=lightyellow shape=diamond style=filled]
	earns [label=earns fillcolor=lightyellow shape=diamond style=filled]
	contains_assess [label=contains_assess fillcolor=lightyellow shape=diamond style=filled]
	has_questions [label=has_questions fillcolor=lightyellow shape=diamond style=filled]
	has_options [label=has_options fillcolor=lightyellow shape=diamond style=filled]
	makes_attempt [label=makes_attempt fillcolor=lightyellow shape=diamond style=filled]
	users -> creates [label=1]
	creates -> courses [label=N]
	users -> instructs [label=M]
	instructs -> courses [label=N]
	categories -> belongs_to [label=1]
	belongs_to -> courses [label=N]
	courses -> has_modules [label=1]
	has_modules -> modules [label=N]
	modules -> has_lectures [label=1]
	has_lectures -> lectures [label=N]
	lectures -> has_materials [label=1]
	has_materials -> materials [label=N]
	users -> enrolled_in [label=1]
	enrolled_in -> enrollments [label=N]
	courses -> enrolled_in [label=1]
	enrollments -> pays_for [label=1]
	pays_for -> payments [label=N]
	courses -> contains_assess [label=1]
	contains_assess -> assessments [label=N]
	assessments -> has_questions [label=1]
	has_questions -> questions [label=N]
	questions -> has_options [label=1]
	has_options -> question_options [label=N]
	users -> makes_attempt [label=1]
	makes_attempt -> attempts [label=N]
	assessments -> makes_attempt [label=1]
	users -> earns [label=1]
	earns -> certificates [label=N]
}
